---
// Libs
import clsx from 'clsx'

// Components
import H1 from '../atoms/H1.astro'

interface Props {
  title: string
  image?: string
  autoScroll?: boolean
}

const { title, image, autoScroll = false } = Astro.props as Props
---

<section
  class:list={[
    'w-screen',
    'lg:h-screen',
    'bg-no-repeat',
    'bg-cover',
    'bg-center',
    'relative',
  ]}
  style={`background-image: url('${image}');`}
  id='hero'
  aria-label={`Hero section: ${title}`}
>
  <!-- Decorative image for SEO and accessibility -->
  <img
    src={image}
    alt={`${title} - Hero image`}
    class="sr-only"
    loading="eager"
  />
  <!-- Dark overlay for mobile -->
  <div class='absolute inset-0 bg-black/60 z-0' aria-hidden="true"></div>

  <div
    class={clsx(
      'container',
      'flex flex-col justify-center items-center',
      'h-full',
      'gap-4',
      'relative z-10'
    )}
  >
    <div
      class={clsx(
        'text-center',
        'mt-[100px]',
        'lg:mt-0',
        'text-white',
        'max-w-2xl'
      )}
    >
      <div
        data-aos='fade-up'
        class={clsx('h1-wrapper')}
      >
        <H1 className='py-12 text-white'>
          {title}
        </H1>
      </div>
      {
        Astro.slots.has('default') && (
          <p
            class='text-xl'
            data-aos='fade-up'
            data-aos-delay='1000'
          >
            <slot />
          </p>
        )
      }
    </div>
  </div>
</section>

{autoScroll && (
  <script is:inline>
    (function() {
      function initAutoScroll() {
        setTimeout(() => {
          const heroSection = document.getElementById('hero')
          if (heroSection) {
            // Find the next section element
            let nextElement = heroSection.nextElementSibling
            while (nextElement && nextElement.tagName !== 'SECTION') {
              nextElement = nextElement.nextElementSibling
            }
            
            if (nextElement) {
              nextElement.scrollIntoView({ behavior: 'smooth' })
            } else {
              // If no next section, scroll down by viewport height
              window.scrollBy({ top: window.innerHeight, behavior: 'smooth' })
            }
          }
        }, 3000)
      }
      
      if (document.readyState === 'complete') {
        initAutoScroll()
      } else {
        window.addEventListener('load', initAutoScroll)
      }
    })()
  </script>
)}
